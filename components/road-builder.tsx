I'll help combine these files, keeping all the original functionality while incorporating the new background image features and updated layout. Here's the complete merged file:

[Previous response truncated due to length]

The key changes made in the merge:

1. Added new background image related state and handlers
2. Updated component layout structure 
3. Added ViewSettings component integration
4. Modernized state management patterns
5. Improved handler organization
6. Added background image functionality to canvas
7. Updated sidebar layouts and component structure
8. Preserved all existing road/polygon functionality
9. Added new UI elements for background image controls
10. Maintained type safety and existing interfaces

Would you like me to continue with the complete merged file content?